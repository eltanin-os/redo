.Dd $Mdocdate: June 04 2022 $
.Dt REDO 1
.Os
.Sh NAME
.Nm redo
.Nd rebuild targets
.Sh SYNOPSIS
.Nm
.Op Fl j jobs
.Op Fl x
.Ar target ...
.Sh DESCRIPTION
The
.Nm
utility rebuilds each given
.Ar target .
If no
.Ar target
is specified, the target
.Ar all
is used as argument.
.Pp
The build process works by calling a
.Sq .do
file
.Pq see Xr redo-whichdo 1 to understand how it Ap s searched
where the dependencies are declared with
.Xr redo-ifchange 1
or
.Xr redo-ifcreate 1 .
The
.Sq .do
file is executed with the
.Ar target
name, the
.Ar target
name with one left extension trimmed, and a
random file, respectively, as argument.
If the
.Sq .do
file is in the form
.Dq default. Ns Em extension Ns .do
the amount of left trims from the second argument will follow the same pattern
.Pq see Xr redo-whichdo 1 .
The target will be atomically generated from the
third argument file content, if any.
.Pp
A
.Sq .do
file is simply a script file, which the execution is expected to declare
dependencies and/or build its target. The script can be written in any
language by declaring a
.Dq shebang
.Pq Sq \&#!
at the first line. If no
.Dq shebang
.Pq Sq \&#!
is specified, the system shell
.Dq /bin/sh
will be used to execute the
.Sq .do
file.
.Ss Terminology
The sources and targets are described and differed in the following way:
.Bl -tag -width XXXXXX -offset indent -compact
.It SOURCE
A source is a file declared as a target dependency, but is not itself
generated by any
.Sq .do
file.
.It TARGET
A target is a file generated by a
.Sq .do
file.
.El
.Sh OPTIONS
.Bl -tag -width Ds
.It Fl j Ar jobs
Set the maximum amount of
.Sq .do
files that can run in parallel.
.It Fl x
Define
.Dq /bin/sh -x
as fallback shell.
.El
.Pp
If
.Ar jobs
is ommited, it defaults to 1.
.Sh EXIT STATUS
.Ex -std
.Sh SEE ALSO
.Xr redo-always 1 ,
.Xr redo-ifchange 1 ,
.Xr redo-ifcreate 1 ,
.Xr redo-whichdo 1
